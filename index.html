<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FrontendTitan - Home</title>

    <!-- Static Files -->
    <link rel="stylesheet" href="/dist/main.css">
    <link rel="stylesheet" href="/dist/nav.css">
    <link rel="stylesheet" href="/dist/global.css">
    <link rel="stylesheet" href="/dist/main.js">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>

<body>
    <main>
        <!-- The canvas container goes inside, forming
             the space effect -->
        <div id="canvas-container"></div>
        <div class="container">
            <nav>
                <div>
                    <h1>FrontendTitan &hairsp; |&hairsp;</h1>
                    <h2>About</h2>
                    <h2>Projects</h2>
                    <h2>Blog</h2>
                    <h2>PS3 Game</h2>
                </div>
                <div>
                    <img src="/src/assets/github.svg" alt="">
                    <img src="/src/assets/youtube.svg" alt="">
                </div>
            </nav>
        </div>
    </main>
</body>

<!-- Background Script -->
<script>
    var scene = new THREE.Scene()
    var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000)
    var renderer = new THREE.WebGLRenderer({ alpha: true }) // Set alpha to true to keep the background transparent

    renderer.setSize(window.innerWidth, window.innerHeight)
    document.getElementById('canvas-container').appendChild(renderer.domElement)

    var positions = new Float32Array(1000 * 3) // 3 vertices per point
    var colors = new Float32Array(1000 * 3) // 3 colors per point

    function resetParticles() {
        for (var i = 0; i < positions.length; i += 3) {
            positions[i] = Math.random() * 1000 - 500 // x
            positions[i + 1] = Math.random() * 1000 - 500 // y
            positions[i + 2] = Math.random() * 1000 - 500 // z

            colors[i] = Math.random()     // r
            colors[i + 1] = Math.random() // g
            colors[i + 2] = Math.random() // b
        }
    }

    resetParticles()

    var geometry = new THREE.BufferGeometry()
    geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3))
    geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3)) // New color attribute

    var material = new THREE.PointsMaterial({ size: 1, vertexColors: true }) // Set vertexColors to true

    var stars = new THREE.Points(geometry, material)
    scene.add(stars)

    camera.position.z = 200

    var cameraSpeed = 0.06 // New variable for camera speed

    var animate = function () {
        requestAnimationFrame(animate)

        // Use the cameraSpeed variable to control the speed of the particles
        camera.position.z -= cameraSpeed

        // If the camera has moved past a certain point, reset the positions of the stars and the camera
        if (camera.position.z < -50) {
            resetParticles()
            geometry.attributes.position.needsUpdate = true
            geometry.attributes.color.needsUpdate = true // Update the colors
            camera.position.z = 200
        }

        renderer.render(scene, camera)
    }

    animate()

    // Add event listener for window resize
    window.addEventListener('resize', function () {
        camera.aspect = window.innerWidth / window.innerHeight
        camera.updateProjectionMatrix()
        renderer.setSize(window.innerWidth, window.innerHeight)
    }, false);
</script>

</html>